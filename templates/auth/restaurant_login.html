<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Partner Access | Last Plate</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --gold: #f1c40f;
      --gold-bright: #ffed4a;
      --gold-glow: rgba(241, 196, 15, 0.4);
      --bg: #010101;
      --glass: rgba(255, 255, 255, 0.03);
      --border: rgba(255, 255, 255, 0.08);
      --accent-green: #00ffa3;
      --accent-red: #ff2d55;
      --spring: cubic-bezier(0.15, 0.85, 0.35, 1.2);
    }

    * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

    body {
      margin: 0;
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--bg);
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      perspective: 1500px;
    }

    /* üåå Bioluminescent Nebula Background */
    .nebula-bg {
      position: fixed;
      inset: -50px;
      z-index: -1;
      background: 
        radial-gradient(circle at 10% 10%, rgba(0, 255, 163, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 90% 90%, rgba(241, 196, 15, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, #1a1500 0%, #010101 100%);
      animation: drift 20s infinite alternate ease-in-out;
    }

    @keyframes drift {
      from { transform: scale(1); }
      to { transform: scale(1.1) rotate(1deg); }
    }

    .login-wrapper { width: 100%; max-width: 460px; padding: 30px; z-index: 10; }

    /* üíé Kinetic Glass Card */
    .divine-card {
      background: var(--glass);
      backdrop-filter: blur(50px) saturate(200%);
      -webkit-backdrop-filter: blur(50px) saturate(200%);
      border: 1px solid var(--border);
      border-radius: 45px;
      padding: 60px 45px;
      box-shadow: 0 50px 100px rgba(0,0,0,0.9), inset 0 0 40px rgba(255,255,255,0.03);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      animation: floatIn 1.5s var(--spring) both;
    }

    @keyframes floatIn {
      from { opacity: 0; transform: rotateX(20deg) translateY(60px); filter: blur(20px); }
      to { opacity: 1; transform: rotateX(0) translateY(0); filter: blur(0); }
    }

    /* üèõÔ∏è Typography */
    .header { text-align: center; margin-bottom: 45px; }
    .status-badge {
      display: inline-flex; align-items: center; gap: 8px; padding: 8px 20px;
      background: rgba(255,255,255,0.03); border: 1px solid var(--border);
      border-radius: 100px; color: var(--gold); font-size: 10px; font-weight: 800;
      letter-spacing: 3px; text-transform: uppercase; margin-bottom: 25px;
    }
    .status-badge span { width: 6px; height: 6px; background: var(--gold); border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.4; transform: scale(1.5); } }

    .title { font-size: 40px; font-weight: 800; letter-spacing: -3px; margin: 0; line-height: 0.9; }

    /* ‚å®Ô∏è Kinetic Inputs */
    .field { margin-bottom: 30px; position: relative; }
    .field label {
      font-size: 11px; font-weight: 800; color: var(--gold);
      text-transform: uppercase; letter-spacing: 2px; display: block;
      margin-bottom: 12px; opacity: 0.6;
    }

    .input-container { position: relative; width: 100%; }

    input {
      width: 100%; background: rgba(255,255,255,0.02); border: 1px solid var(--border);
      border-radius: 22px; padding: 18px 25px; color: white; font-size: 16px;
      transition: all 0.5s var(--spring); outline: none;
    }

    input:focus {
      background: rgba(255,255,255,0.05); border-color: var(--gold);
      box-shadow: 0 0 40px rgba(241,196,15,0.1); transform: scale(1.02);
    }

    /* üëÅÔ∏è Eye Button Logic */
    .eye-toggle {
      position: absolute; right: 18px; top: 50%; transform: translateY(-50%);
      background: none; border: none; color: var(--border); cursor: pointer;
      padding: 8px; transition: 0.3s; z-index: 5;
    }
    .eye-toggle.visible { color: var(--accent-green); filter: drop-shadow(0 0 8px var(--accent-green)); }

    /* üí´ Liquid Action Button */
    .action-btn {
      width: 100%; padding: 20px; border-radius: 25px; border: none;
      background: linear-gradient(135deg, var(--gold), var(--gold-bright));
      color: #000; font-size: 16px; font-weight: 900; letter-spacing: 1px;
      cursor: pointer; transition: all 0.4s var(--spring);
      box-shadow: 0 20px 40px var(--gold-glow);
    }

    .action-btn:hover { transform: translateY(-6px) rotate(-1deg); box-shadow: 0 30px 60px rgba(241,196,15,0.5); letter-spacing: 3px; }
    .action-btn:active { transform: translateY(0) scale(0.96); }

    .footer-links { margin-top: 40px; text-align: center; font-size: 13px; color: rgba(255,255,255,0.4); letter-spacing: 1px; }
    .footer-links a { color: var(--gold); text-decoration: none; font-weight: 800; transition: 0.3s; }
    .footer-links a:hover { text-shadow: 0 0 10px var(--gold-glow); }

  </style>
</head>
<body>

  <div class="nebula-bg"></div>

  <div class="login-wrapper">
    <div class="divine-card" id="card">
      <div class="header">
        <div class="status-badge"><span></span> Operational Vault</div>
        <h1 class="title">Partner<br>Access</h1>
      </div>

      <div class="field">
        <label>Identity (Mobile)</label>
        <div class="input-container">
            <input type="tel" id="mobile" placeholder="Registered number" autocomplete="off">
        </div>
      </div>

      <div class="field">
        <label>Passkey</label>
        <div class="input-container">
            <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button class="eye-toggle" id="togglePassword">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
        </div>
      </div>

      <button id="restLoginBtn" class="action-btn">Login</button>

      <div class="footer-links">
        Sync failure? <a href="mailto:terminalplate@gmail.com">Relink Identity</a>
      </div>
    </div>
  </div>

  <script>
    const passwordInput = document.getElementById('password');
    const toggleBtn = document.getElementById('togglePassword');

    // üëÅÔ∏è Toggle Password Visibility
    toggleBtn.addEventListener('click', () => {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      toggleBtn.classList.toggle('visible');
    });

    const rbtn = document.getElementById("restLoginBtn");
    const card = document.getElementById('card');

    if (rbtn) {
      rbtn.addEventListener("click", async function () {
        const mobile = document.getElementById("mobile").value;
        const password = document.getElementById("password").value;

        if(!mobile || !password) { triggerShock(); return; }

        rbtn.innerText = "Synchronizing...";
        rbtn.style.opacity = "0.6";

        try {
          const response = await fetch("/api/restaurant/login", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({ mobile, password })
          });
          
          const data = await response.json();

          if (data.success) {
            rbtn.innerText = "Access Granted";
            rbtn.style.background = "var(--accent-green)";
            rbtn.style.boxShadow = "0 0 50px rgba(0, 255, 163, 0.4)";
            setTimeout(() => window.location.href = "/restaurant/dashboard", 800);
          } else {
            rbtn.innerText = "Sync Failed";
            rbtn.style.background = "var(--accent-red)";
            rbtn.style.boxShadow = "0 0 50px rgba(255, 45, 85, 0.4)";
            triggerShock();
            setTimeout(() => {
              rbtn.innerText = "Login";
              rbtn.style.background = "linear-gradient(135deg, var(--gold), var(--gold-bright))";
              rbtn.style.opacity = "1";
            }, 2000);
          }
        } catch (e) {
          rbtn.innerText = "Protocol Error";
        }
      });
    }

    function triggerShock() {
      card.animate([
        { transform: 'perspective(1500px) translateZ(0) translateX(0)' },
        { transform: 'perspective(1500px) translateZ(-40px) translateX(-12px)' },
        { transform: 'perspective(1500px) translateZ(-40px) translateX(12px)' },
        { transform: 'perspective(1500px) translateZ(0) translateX(0)' }
      ], { duration: 400, easing: 'ease-in-out' });
    }
  </script>

</body>
</html>
